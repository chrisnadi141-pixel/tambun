<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Display Jadwal Sholat - Masjid Jamie Al Muttaqin</title>

<style>
body{
  margin:0;
  padding:20px;
  background:url("masjid2.jpg") no-repeat center center fixed;
  background-size:cover;
  color:white;
  font-family:Arial, sans-serif;
  text-shadow:1px 2px 4px rgba(0,0,0,.7);
}

/* HEADER */
#headerTop{
  display:grid;
  grid-template-columns:1fr 2fr 1fr;
  align-items:center;
  background:rgba(0,0,0,.45);
  padding:20px 30px;
  border-radius:18px;
  margin-bottom:25px;
}

#jamDigital{
  font-size:4.2rem;
  font-weight:900;
  color:#00ffff;
  text-shadow:0 0 15px rgba(0,255,255,.9);
}

.header-center{text-align:center}

#masjidName{
  font-size:2.6rem;
  font-weight:900;
}

/* ALAMAT BERJALAN */
#alamatWrapper{
  overflow:hidden;
  white-space:nowrap;
  margin-top:6px;
}
#alamatMasjid{
  display:inline-block;
  padding-left:100%;
  animation:alamatJalan 18s linear infinite;
  font-size:1.3rem;
  color:#ffeeaa;
}
@keyframes alamatJalan{
  from{transform:translateX(0)}
  to{transform:translateX(-100%)}
}

.header-right{text-align:right}
#tanggalDisplay{font-size:1.5rem}
#hijriDisplay{font-size:1.4rem;color:#ffd966}

/* HARI BESAR */
#hariBesarBox{
  background:rgba(0,0,0,.55);
  padding:12px;
  border-radius:12px;
  max-width:700px;
  margin:10px auto;
  font-size:1.4rem;
  font-weight:700;
  text-align:center;
  color:#ffd966;
}

/* INFO COUNTDOWN */
#infoBox{
  background:rgba(0,0,0,.45);
  padding:20px;
  border-radius:18px;
  max-width:620px;
  margin:15px auto;
  text-align:center;
}
#countdown{
  font-size:2rem;
  font-weight:700;
}

/* TABLE */
table{
  width:100%;
  max-width:700px;
  margin:auto;
  border-collapse:collapse;
  font-size:1.4rem;
}
th,td{
  padding:12px;
  background:rgba(0,0,0,.4);
}

/* MARQUEE */
#marqueeBox{
  background:rgba(0,0,0,.55);
  padding:12px;
  font-size:1.6rem;
  margin-top:25px;
  border-radius:8px;
  overflow:hidden;
}
#marqueeText{
  display:inline-block;
  white-space:nowrap;
  animation:jalan 18s linear infinite;
}
@keyframes jalan{
  from{transform:translateX(100%)}
  to{transform:translateX(-100%)}
}
</style>
</head>

<body>

<!-- HEADER -->
<div id="headerTop">
  <div><div id="jamDigital"></div></div>

  <div class="header-center">
    <div id="masjidName">MASJID JAMIE<br>AL MUTTAQIN</div>
    <div id="alamatWrapper">
      <div id="alamatMasjid">Sumberjaya, Kec. Tambun Selatan, Kabupaten Bekasi</div>
    </div>
  </div>

  <div class="header-right">
    <marquee><div id="tanggalDisplay"></div></marquee>
    <div id="hijriDisplay"></div>
  </div>
</div>
<!-- HARI BESAR ISLAM -->
<div id="hariBesarBox">
  <span id="hariBesarText">Memuat hari besar Islam...</span>
</div>
<!-- COUNTDOWN SHOLAT -->
<div id="infoBox">
  <div id="countdown">Memuat waktu sholat...</div>
</div>

<!-- TABEL SHOLAT -->
<table id="jadwalTable">
<thead>
<tr>
<th>IMSAK</th>
<th>SUBUH</th>
<th>ZUHUR</th>
<th>ASAR</th>
<th>MAGHRIB</th>
<th>ISYA</th>
</tr>
</thead>
<tbody></tbody>
</table>

<!-- RUNNING TEXT -->
<div id="marqueeBox">
<span id="marqueeText">
Selamat datang di Masjid Jamie Al Muttaqin — Sholat tepat waktu lebih utama —
Jadikan masjid sebagai rumah kedua kita — Semoga Allah memberkahi aktivitas kita —
</span>
</div>

<audio id="adzanAudio" src="adzan.mp3" preload="auto"></audio>

<script>
/* JAM */
setInterval(()=>{
  const n=new Date()
  jamDigital.textContent=
  `${String(n.getHours()).padStart(2,0)}:${String(n.getMinutes()).padStart(2,0)}`
},1000)

/* TANGGAL & HIJRI */
setInterval(()=>{
  const h=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]
  const b=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus",
               "September","Oktober","November","Desember"]
  const n=new Date()
  tanggalDisplay.textContent=`${h[n.getDay()]}, ${n.getDate()} ${b[n.getMonth()]} ${n.getFullYear()}`
  hijriDisplay.textContent=new Intl.DateTimeFormat(
    "id-ID-u-ca-islamic",{day:"numeric",month:"long",year:"numeric"}
  ).format(n).replace("AH","H")
},1000)
/* HARI BESAR ISLAM */
const hariBesar=[
  {n:"Isra Mi'raj Nabi (ﷺ)",m:1,d:16},
  {n:"Awal Ramadhan",m:2,d:19},
  {n:"Nuzulul Qur'an",m:3,d:07},
  {n:"Idul Fitri",m:3,d:20},
  {n:"Idul Adha",m:5,d:27},
  {n:"Tahun Baru Islam",m:6,d:16},
  {n:"Maulid Nabi (ﷺ)",m:8,d:25}
]

function updateHariBesar(){
  const now=new Date()
  let dekat=null,sel=9999
  hariBesar.forEach(h=>{
    let t=new Date(now.getFullYear(),h.m-1,h.d)
    if(t<now)t.setFullYear(t.getFullYear()+1)
    let s=Math.ceil((t-now)/86400000)
    if(s<sel){sel=s;dekat=h}
  })
  hariBesarText.textContent=`Menuju ${dekat.n} — ${sel} hari lagi`
}
updateHariBesar()


/* JADWAL SHOLAT + COUNTDOWN */
let jadwal=null
let sudahAdzan={Subuh:false,Zuhur:false,Asar:false,Maghrib:false,Isya:false}
const lokasiId=1203

fetch(`https://api.myquran.com/v2/sholat/jadwal/${lokasiId}/${new Date().toISOString().slice(0,10).replace(/-/g,'/')}`)
.then(r=>r.json())
.then(j=>{
  jadwal=j.data.jadwal
  jadwalTable.querySelector("tbody").innerHTML=
  `<tr>
    <td>${jadwal.imsak}</td>
    <td>${jadwal.subuh}</td>
    <td>${jadwal.dzuhur}</td>
    <td>${jadwal.ashar}</td>
    <td>${jadwal.maghrib}</td>
    <td>${jadwal.isya}</td>
  </tr>`
})

setInterval(()=>{
  if(!jadwal) return
  const now=new Date()
  const today=new Date(now.getFullYear(),now.getMonth(),now.getDate())

  const list=[
    {n:"Subuh",t:jadwal.subuh},
    {n:"Zuhur",t:jadwal.dzuhur},
    {n:"Asar",t:jadwal.ashar},
    {n:"Maghrib",t:jadwal.maghrib},
    {n:"Isya",t:jadwal.isya}
  ]

  let next=null
  list.forEach(j=>{
    const [h,m]=j.t.split(":")
    const d=new Date(today.getFullYear(),today.getMonth(),today.getDate(),h,m)
    if(d>now && !next) next={...j,d}
  })

  if(!next){
    countdown.textContent="Semua sholat hari ini telah selesai"
    return
  }

  const diff=next.d-now
  const h=Math.floor(diff/3600000)
  const m=Math.floor((diff%3600000)/60000)
  const s=Math.floor((diff%60000)/1000)

  countdown.textContent=`MENUJU SHOLAT ${next.n.toUpperCase()} : ${h}j ${m}m ${s}d`

  const nowHM=`${String(now.getHours()).padStart(2,0)}:${String(now.getMinutes()).padStart(2,0)}`
  if(nowHM===next.t && !sudahAdzan[next.n]){
    adzanAudio.play()
    sudahAdzan[next.n]=true
  }
},1000)

/* BACKGROUND SLIDE */
const bg=["tambun.jpg","masjid2.jpg"]
let i=0
setInterval(()=>{
  document.body.style.backgroundImage=`url('${bg[i]}')`
  i=(i+1)%bg.length
},15000)
</script>

</body>
</html>
